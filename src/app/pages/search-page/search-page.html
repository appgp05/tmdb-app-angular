<div class="flex flex-col gap-3">
  <app-return-component pageName="Search" />
  
  <section>
    <app-search-bar 
      [placeholder]="'SEARCH'" 
      (search)="onSearch($event)"
    />
  </section>

  <section>
    @if (!isLoading() && searchResults().length === 0 && error() === null) {
      <div class="flex flex-row justify-between p-3">
        <p class="text-sm font-light">GENRES</p>
        <div class="flex flex-col">
          @for (genre of getGenresToShow(); track genre.id) {
            <p class="cursor-pointer font-medium hover:underline text-right">
              {{ genre.name }}
            </p>
          }

          @if (genres().length > 10) {
            @if (!showAllGenres()) {
              <button (click)="loadMoreGenres()" class="text-right font-light text-sm"> LOAD MORE </button>
            } @else {
              <button (click)="showLessGenres()" class="text-right font-light text-sm"> LOAD LESS </button>
            }
          }
        </div>
      </div>
    }
  </section>

  <!-- Resultados -->
  <!-- <section>
    @if (searchResults().length > 0) {
      <div class="flex flex-col gap-5">
        <h2 class="text-xl font-bold">Pel√≠culas encontradas:</h2>
        <ul class="flex flex-col gap-2">
          @for (movie of searchResults(); track movie.id) {
            <li 
              class="py-3 px-1 cursor-pointer border-b-1 flex flex-row justify-between items-start movie-list transition-all duration-100"
              (click)="onMovieSelect(movie.id)"
            >
              <img [src]="'https://image.tmdb.org/t/p/w92' + movie.poster_path" class="w-15 aspect-2/3 lg:w-20 xl:w-25 object-cover rounded-sm mr-5">
              <p class="text-lg w-3/4">{{ movie.title }}</p>
              <p class="text-sm">{{ movie.release_date | date: 'yyyy'}}</p>
            </li>
          }
        </ul>
      </div>
    }
  </section> -->

  <!-- Loading -->
  <section>
    @if (isLoading()) {
      <div class="flex justify-center items-center py-12">
        <div class="animate-spin rounded-lg size-10 loading-color"></div>
      </div>
    }
  </section>

  <!-- Error -->
  <section>
    @if (error()) {
      <div class="bg-red-200 text-red-700 px-4 py-3 rounded">
        <strong>Error:</strong> {{ error() }}
      </div>
    }
  </section>

</div>